# Project moved to Github: https://github.com/todvora/velocity-validator #
---
# Java tool for validating apache velocity templates #

## Purpose ##
Simple validation tool for detecting bugs in Apache Velocity templates. It iterates thru directories and validates every .vm file. Errors are printed with filename, error and possible solutions.

## Usage ##

**java -jar velocityvalidator.jar path\_to\_templates `[`-rules=path\_to\_config\_file`]` `[`-verbose`]`**

path\_to\_tempates = root directory, where starts detection of templates, it will crawl recursive thru whole subtree of directories

_path\_to\_config\_file_ = not mandatory, file, on every line new java regular expression of illegal input.
> For example _#foreach(.`*` as .`*`)_  `[`correct one is #foreach(.`*` in .`*`)`]`

## Examples of incorrect templates ##


---


### IncorrectVariableName.vm ###
```
###UTF-8

## illegal exclamation mark at end of variable
${variable!}
```

---


### TwoEndBlocksTemplate.vm ###
```
###UTF-8

#if($variable)
#end
## one more end, with no opening tag
#end
```

---


### UnfinishedBlockTemplate.vm ###
```
###UTF-8

#if($variable)

    $variable
## commented out end
## #end
```

---


### Validation output ###
```
*java -jar bin/velocityvalidator-0.1.1.jar .*

Error in file /mnt/raid/home/dvorak/examples/./IncorrectVariableName.vm
    org.apache.velocity.runtime.parser.TemplateParseException: Encountered "!}\n" at /mnt/raid/home/dvorak/examples/./IncorrectVariableName.vm[line 3, column 11]
    Was expecting one of:
        "}" ...
        <DOT> ...
        
Error in file /mnt/raid/home/dvorak/examples/./TwoEndBlocksTemplate.vm
    org.apache.velocity.runtime.parser.TemplateParseException: Encountered "#end\n" at /mnt/raid/home/dvorak/examples/./TwoEndBlocksTemplate.vm[line 5, column 1]
    Was expecting one of:
        <EOF> 
        "(" ...
        <RPAREN> ...
        <ESCAPE_DIRECTIVE> ...
        <SET_DIRECTIVE> ...
        "##" ...
        "\\\\" ...
        "\\" ...
        <TEXT> ...
        "*#" ...
        "*#" ...
        <STRING_LITERAL> ...
        <IF_DIRECTIVE> ...
        <STOP_DIRECTIVE> ...
        <INTEGER_LITERAL> ...
        <FLOATING_POINT_LITERAL> ...
        <WORD> ...
        <BRACKETED_WORD> ...
        <IDENTIFIER> ...
        <DOT> ...
        "{" ...
        "}" ...
        
Error in file /mnt/raid/home/dvorak/examples/./UnfinishedBlockTemplate.vm
    org.apache.velocity.runtime.parser.TemplateParseException: Encountered "<EOF>" at /mnt/raid/home/dvorak/examples/./UnfinishedBlockTemplate.vm[line 7, column 8]
    Was expecting one of:
        "(" ...
        <RPAREN> ...
        <ESCAPE_DIRECTIVE> ...
        <SET_DIRECTIVE> ...
        "##" ...
        "\\\\" ...
        "\\" ...
        <TEXT> ...
        "*#" ...
        "*#" ...
        <STRING_LITERAL> ...
        <END> ...
        <IF_DIRECTIVE> ...
        <ELSEIF_DIRECTIVE> ...
        <ELSE_DIRECTIVE> ...
        <STOP_DIRECTIVE> ...
        <INTEGER_LITERAL> ...
        <FLOATING_POINT_LITERAL> ...
        <WORD> ...
        <BRACKETED_WORD> ...
        <IDENTIFIER> ...
        <DOT> ...
        "{" ...
        "}" ...
        
Done, Found 3 errors
```